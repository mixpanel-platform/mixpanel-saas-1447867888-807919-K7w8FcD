<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
    <style type="text/css">

      form {
        padding:10px 0 0 0;
      }
    	
    	.module-container {
    		padding:10px;
    		border:solid 1px grey;
    		width:945px;
    		display: -webkit-flex;
    		display: flex;
    		-webkit-align-items: center;
    		align-items: center;
    		-webkit-justify-content: center;
    		justify-content: center;
    		-webkit-flex-flow: row wrap;
    		flex-flow: row wrap;
    		-webkit-align-content: stretch;
    		align-content: stretch;
    	}

      .modal {
        display: none;
        z-index:100;
        background-color: white;
        position: fixed;
        padding: 20px;
        left: 341px;
        top: 125px;
        width: 280px;
        border: 1px grey solid;
        margin: auto;
      }

      #overlay {
        background-color: #3c4c63;
        height: 100%;
        left: 0;
        opacity: .8;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 10;
        display:none;
      }

      .module {
         margin:10px;
         padding:5px;
         border:solid 1px grey;   
      }

    	.small {
    		-webkit-flex: 0 0 283px;
    		flex: 0 0 283px;
    	}

      .medium {
          -webkit-flex: 0 0 598px;
          flex: 0 0 598px;
      }

    	.large {
    		-webkit-flex: 0 0 914px;
    		flex: 0 0 914px;
    	}

      .label {
        padding-bottom:5px;
      }

    	.add-button {
    		text-align:center;
    		font-size:24px;
    		color:grey;
    	}

    	.legend {
    		padding-top:2px;
    		text-align:center;
    	}

      .add {
          -webkit-flex: 0 0 283px;
          flex: 0 0 283px;
          order:1;
      }
    </style>
  </head>

  <body class="mixpanel-platform-body">

    <div id="overlay"></div>

    <div class="module-container">

      <div id="add-module" class="add module"><div class='legend'>Add a module</div></div>

      <div class="modal">
        <span class="label">Please select a module:</span>
        <form id="form" action="">
          <input type="radio" name="Segmentation" value="segmentation"> Segmentation<br>
          <input type="radio" name="Fuel Gauge" value="gauge"> Fuel Gauge<br>
          <input type="radio" name="Top Values" value="top"> Top Values <br><br>
        </form>
        <button class="button" name="Submit">Submit</button>
      </div>
          
      </div>
	
    </div>

    <script type="text/javascript">
      var modal = "<div class='modal'></div>";
      // var overlay = "<div id='overlay'></div>";

      // Add modules. Pass a container and the size of the module.
      var addModule = function(container,type){
        var size = type == "segmentation"? "large" : (type == "top" ? "medium" : "small");
        container.append("<div class='"+type+" "+size+" module'><div class='legend'>This is a "+type+" module.</div></div>");
      };

      // var closeModal = function(){
      //   $(".modal").css("display","none");
      //   $(this).toggle();
      //   $(this).checked = false;
      // }

      $("#add-module").click(function(){
        $("#overlay").toggle();
        $(".modal").toggle();
      });

      // Handle closing of the overlay on click
      $("#overlay").click(function(){
        if ($(this).css("display") == "none") {
          // Do nothing
        } else {
          $(".modal").css("display","none");
          $(this).toggle();
          $(this).checked = false;
        }
      });

      // Add a module and alert the user if they submit without a selected value
      $(".button").click(function(){
        if ($("input[type='radio']:checked").length > 0){
          val = $("input[type='radio']:checked").val();
          console.log(val);
          addModule($(".module-container"),val);

          // Close modal and overlay after submit and also clear selections
          $(".modal").css("display","none");
          $("#overlay").toggle();
          $("input[type='radio']:checked").prop("checked",false);
        }
        else{
         alert("Please select a module.");
        }
      });

      // Check one radio button at a time
      $(document).ready(function () {
        $('input[type=radio]').change(function() {
          // When any radio button on the page is selected,
          // then deselect all other radio buttons.
          $('input[type=radio]:checked').not(this).prop('checked', false);
        });
      })

    </script>
  </body>
</html>
